<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>File: vmrun.rb</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../../../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



  <div id="fileHeader">
    <h1>vmrun.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>lib/poolparty/net/remoter_bases/vmrun/vmrun.rb
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Tue May 12 14:11:00 -0700 2009</td>
    </tr>
    </table>
  </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
The Vmrun remote base uses the vmrun command to implement a cloud remoter
base. The Vmrun remoter base has been tested with Vmware fusion on the mac.
</p>
<p>
In order to use the Vmrun remoter base you will need to setup a few things.
First, you will need to have the Vmware fusion installed and vmrun command
in your path. The default location of the vmrun binary is
/Library/Application Support/VMware Fusion/vmrun. You will then of course
need a virtual machine installed and available. Once you have your instance
installed and running, you need to setup your ssh keys so that poolparty
can ssh into the instance. Get the ip of you instnace with ifconfig inside
the running instance. For example:
</p>
<pre>
  ssh root@172.0.1.129 &quot;mkdir /root/.ssh &amp;&amp; chmod 600 /root/.ssh&quot;
  scp my_key.pub root@172.0.1.129:/root/.ssh/authorized_keys
</pre>
<p>
provide a using :vmrun block in your clouds.rb for example:
</p>
<pre>
  using :vmrun do
    vmx_hash(::File.expand_path(&quot;~/Documents/Virtual\ Machines.localized/Ubuntu-jaunty.vmwarevm/Ubuntu-jaunty.vmx&quot;) =&gt; '172.16.68.129')
  end

 The vmx file fulfills a similar purpose as the ami id in ec2. Note that expand path.  vmrun return fuill paths, so we must provide full paths so things match up later. W
 Vmrun does not provide a meta server like ec2 has, so you need to list the ip address of your VM.  For this reason it is recommended that you use NAT addressing on your VM to maintain consistent addressing across different physical networks.
</pre>
<p>
Also, note that vmrun does not copy the VM to a new distinct VM on each
run, so if you want to be able to start from a known state, you should make
a snapshot before using your vm with poolparty. Then, you can rollback to
this initial state if you want to ensure you can repeat a fresh
cloud-start.
</p>

    </div>


   </div>


  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>