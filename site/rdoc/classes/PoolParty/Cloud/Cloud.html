<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: PoolParty::Cloud::Cloud</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">PoolParty::Cloud::Cloud</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/lib/poolparty/poolparty/cloud_rb.html">
                lib/poolparty/poolparty/cloud.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="../PoolPartyBaseClass.html">
                PoolParty::PoolPartyBaseClass
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000258">add_poolparty_base_requirements</a>&nbsp;&nbsp;
      <a href="#M000247">after_create</a>&nbsp;&nbsp;
      <a href="#M000249">after_launch_instance</a>&nbsp;&nbsp;
      <a href="#M000246">before_create</a>&nbsp;&nbsp;
      <a href="#M000252">build_and_store_new_config_file</a>&nbsp;&nbsp;
      <a href="#M000256">build_from_existing_file</a>&nbsp;&nbsp;
      <a href="#M000254">build_manifest</a>&nbsp;&nbsp;
      <a href="#M000253">copy_custom_monitors</a>&nbsp;&nbsp;
      <a href="#M000241">immutable_methods</a>&nbsp;&nbsp;
      <a href="#M000251">ip</a>&nbsp;&nbsp;
      <a href="#M000250">ips</a>&nbsp;&nbsp;
      <a href="#M000242">method_added</a>&nbsp;&nbsp;
      <a href="#M000243">method_missing</a>&nbsp;&nbsp;
      <a href="#M000245">name</a>&nbsp;&nbsp;
      <a href="#M000244">new</a>&nbsp;&nbsp;
      <a href="#M000259">other_clouds</a>&nbsp;&nbsp;
      <a href="#M000255">rebuild_manifest</a>&nbsp;&nbsp;
      <a href="#M000260">reset!</a>&nbsp;&nbsp;
      <a href="#M000248">setup_defaults</a>&nbsp;&nbsp;
      <a href="#M000240">verbose</a>&nbsp;&nbsp;
      <a href="#M000257">write_properties_hash</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->
    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">
        <span class="include-name"><a href="../CloudResourcer.html">CloudResourcer</a></span>
        <span class="include-name"><a href="../PluginModel.html">PoolParty::PluginModel</a></span>
        <span class="include-name"><a href="../Resources.html">PoolParty::Resources</a></span>
        <span class="include-name"><a href="../Callbacks.html">PoolParty::Callbacks</a></span>
        <span class="include-name"><a href="../DependencyResolverCloudExtensions.html">PoolParty::DependencyResolverCloudExtensions</a></span>
        <span class="include-name"><a href="../PrettyPrinter.html">PrettyPrinter</a></span>
        <span class="include-name"><a href="../Remote.html">::PoolParty::Remote</a></span>
        <span class="include-name"><a href="../CloudDsl.html">PoolParty::CloudDsl</a></span>
        <span class="include-name"><a href="../Verification.html">PoolParty::Verification</a></span>
      </div>
    </div>

    <div id="section">



    <div id="aliases-list">
      <h3 class="section-bar">External Aliases</h3>

      <div class="name-list">
                        <table summary="aliases">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">cloud_name</td>
          <td>-&gt;</td>
          <td class="context-item-value">name</td>
        </tr>
                        </table>
      </div>
    </div>


    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">cloud_name</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">remote_base</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">templates</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000241" class="method-detail">
        <a name="M000241"></a>

        <div class="method-heading">
          <a href="#M000241" class="method-signature">
          <span class="method-name">immutable_methods</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000241-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000241-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 43</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">immutable_methods</span>
        [<span class="ruby-identifier">:name</span>]
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000242" class="method-detail">
        <a name="M000242"></a>

        <div class="method-heading">
          <a href="#M000242" class="method-signature">
          <span class="method-name">method_added</span><span class="method-args">(sym)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Redefining methods are not allowed
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000242-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000242-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 48</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">method_added</span> <span class="ruby-identifier">sym</span>        
        <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Exception: #{sym.to_s.capitalize} method has been redefined&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">immutable_methods</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">sym</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">sym</span>)
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000244" class="method-detail">
        <a name="M000244"></a>

        <div class="method-heading">
          <a href="#M000244" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(name, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Freeze the cloud_name so we can&#8216;t modify it at all, set the
plugin_directory call and run instance_eval on the block and then call the
<a href="Cloud.html#M000247">after_create</a> callback
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000244-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000244-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 79</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
        <span class="ruby-ivar">@cloud_name</span> = <span class="ruby-identifier">name</span>
        <span class="ruby-ivar">@cloud_name</span>.<span class="ruby-identifier">freeze</span>
        
        <span class="ruby-identifier">plugin_directory</span> <span class="ruby-node">&quot;#{pool_specfile ? ::File.dirname(pool_specfile) : Dir.pwd}/plugins&quot;</span>        
        <span class="ruby-identifier">before_create</span>
        <span class="ruby-keyword kw">super</span>
        <span class="ruby-identifier">after_create</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000258" class="method-detail">
        <a name="M000258"></a>

        <div class="method-heading">
          <a href="#M000258" class="method-signature">
          <span class="method-name">add_poolparty_base_requirements</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Add all the poolparty requirements here NOTE: These are written as plugins
in the lib/poolparty/base_packages directory for examples. Also note that
there is no block associated. This is because we have written all that is
necessary in a method called enable which is called when there is no block
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000258-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000258-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 214</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_poolparty_base_requirements</span>
        <span class="ruby-comment cmt"># poolparty_base_heartbeat</span>
        <span class="ruby-identifier">poolparty_base_ruby</span>
        <span class="ruby-identifier">poolparty_base_packages</span>        
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000247" class="method-detail">
        <a name="M000247"></a>

        <div class="method-heading">
          <a href="#M000247" class="method-signature">
          <span class="method-name">after_create</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Callback called after the cloud has been created, everything has run and is
set at this point here the base requirements are added as well as an empty
chef recipe is called Also, the <a
href="Cloud.html#M000247">after_create</a> hook on the plugins used by the
cloud are called here
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000247-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000247-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 104</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">after_create</span>
        <span class="ruby-operator">::</span><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span>(<span class="ruby-node">&quot;#{Default.tmp_path}/dr_configure&quot;</span>)
        
        <span class="ruby-identifier">run_in_context</span> <span class="ruby-keyword kw">do</span>
          <span class="ruby-identifier">add_optional_enabled_services</span>
          <span class="ruby-identifier">chef</span> <span class="ruby-keyword kw">do</span>
          <span class="ruby-keyword kw">end</span>
        <span class="ruby-keyword kw">end</span>
        
        <span class="ruby-identifier">plugin_store</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">call_after_create_callbacks</span> }
        <span class="ruby-identifier">setup_defaults</span>
        
        <span class="ruby-identifier">setup_callbacks</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000249" class="method-detail">
        <a name="M000249"></a>

        <div class="method-heading">
          <a href="#M000249" class="method-signature">
          <span class="method-name">after_launch_instance</span><span class="method-args">(inst=nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000249-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000249-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 129</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">after_launch_instance</span>(<span class="ruby-identifier">inst</span>=<span class="ruby-keyword kw">nil</span>)
        <span class="ruby-identifier">remote_base</span>.<span class="ruby-identifier">send</span> <span class="ruby-identifier">:after_launch_instance</span>, <span class="ruby-identifier">inst</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000246" class="method-detail">
        <a name="M000246"></a>

        <div class="method-heading">
          <a href="#M000246" class="method-signature">
          <span class="method-name">before_create</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000246-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000246-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 94</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">before_create</span>     
        <span class="ruby-identifier">context_stack</span>.<span class="ruby-identifier">push</span> <span class="ruby-keyword kw">self</span>
        (<span class="ruby-identifier">parent</span> <span class="ruby-value">? </span><span class="ruby-identifier">parent</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>).<span class="ruby-identifier">add_poolparty_base_requirements</span>
        <span class="ruby-identifier">context_stack</span>.<span class="ruby-identifier">pop</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000252" class="method-detail">
        <a name="M000252"></a>

        <div class="method-heading">
          <a href="#M000252" class="method-signature">
          <span class="method-name">build_and_store_new_config_file</span><span class="method-args">(filepath=nil, force=false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Build the <a href="Cloud.html#M000244">new</a> poolparty manifest Wrapping
all of these requirements into the one poolparty class.
</p>
<p>
TODO: Consider the benefits of moving all the manifest classes to separate
files and keeping the containing references in the include
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000252-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000252-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 150</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build_and_store_new_config_file</span>(<span class="ruby-identifier">filepath</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">force</span>=<span class="ruby-keyword kw">false</span>)
        <span class="ruby-identifier">filepath</span> <span class="ruby-operator">||=</span> <span class="ruby-operator">::</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">Default</span>.<span class="ruby-identifier">storage_directory</span>, <span class="ruby-value str">&quot;poolparty.pp&quot;</span>)
        <span class="ruby-comment cmt"># write_properties_hash if debugging</span>
        <span class="ruby-identifier">vputs</span> <span class="ruby-node">&quot;Building new manifest configuration file (forced: #{force})&quot;</span>
        <span class="ruby-identifier">manifest</span> = <span class="ruby-identifier">force</span> <span class="ruby-value">? </span><span class="ruby-identifier">rebuild_manifest</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">build_manifest</span>
        <span class="ruby-operator">::</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">filepath</span>, <span class="ruby-value str">&quot;w&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">file</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">manifest</span>
        <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000256" class="method-detail">
        <a name="M000256"></a>

        <div class="method-heading">
          <a href="#M000256" class="method-signature">
          <span class="method-name">build_from_existing_file</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
If the pp already exists, then let&#8216;s not recreate it TODO: Abstract
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000256-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000256-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 196</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build_from_existing_file</span>
        <span class="ruby-operator">::</span><span class="ruby-constant">FileTest</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-node">&quot;#{Default.base_config_directory}/poolparty.pp&quot;</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">open</span>(<span class="ruby-node">&quot;#{Default.base_config_directory}/poolparty.pp&quot;</span>).<span class="ruby-identifier">read</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000254" class="method-detail">
        <a name="M000254"></a>

        <div class="method-heading">
          <a href="#M000254" class="method-signature">
          <span class="method-name">build_manifest</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
FIXME MOVE TO DEPENDECY RESOL
</p>
<pre>
 Configuration files
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000254-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000254-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 176</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build_manifest</span>
        <span class="ruby-identifier">vputs</span> <span class="ruby-value str">&quot;Building manifest&quot;</span>
        <span class="ruby-ivar">@build_manifest</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">build_from_existing_file</span>
        <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@build_manifest</span>          
          <span class="ruby-identifier">props</span> = <span class="ruby-identifier">to_properties_hash</span>
          
          <span class="ruby-ivar">@build_manifest</span> =  <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:dependency_resolver</span>].<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:compile</span>, <span class="ruby-identifier">props</span>, <span class="ruby-keyword kw">self</span>)
        <span class="ruby-keyword kw">end</span>
        <span class="ruby-identifier">dputs</span> <span class="ruby-value str">&quot;Finished creating manifest&quot;</span>
        <span class="ruby-ivar">@build_manifest</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000253" class="method-detail">
        <a name="M000253"></a>

        <div class="method-heading">
          <a href="#M000253" class="method-signature">
          <span class="method-name">copy_custom_monitors</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
If there is a directory named monitors in the same directory as the pool
specification file is in, then create a monitors directory in the storage
directory and mirror the two. When <a
href="../../PoolParty.html">PoolParty</a> &quot;boots&quot; up, it scans
the monitors directory for any custom monitors that are in known locations,
these are included
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000253-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000253-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 166</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">copy_custom_monitors</span>
        <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Default</span>.<span class="ruby-identifier">custom_monitor_directories</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-constant">Default</span>.<span class="ruby-identifier">custom_monitor_directories</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
            <span class="ruby-constant">Dir</span>[<span class="ruby-node">&quot;#{dir}/*.rb&quot;</span>].<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-operator">::</span><span class="ruby-constant">Suitcase</span><span class="ruby-operator">::</span><span class="ruby-constant">Zipper</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">f</span>, <span class="ruby-value str">&quot;monitors&quot;</span>)}
          <span class="ruby-keyword kw">end</span>
        <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000251" class="method-detail">
        <a name="M000251"></a>

        <div class="method-heading">
          <a href="#M000251" class="method-signature">
          <span class="method-name">ip</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
TODO: make this be a random <a href="Cloud.html#M000251">ip</a>, since we
should not rely on it being the same each time
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000251-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000251-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 139</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ip</span>
        <span class="ruby-identifier">ips</span>.<span class="ruby-identifier">first</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000250" class="method-detail">
        <a name="M000250"></a>

        <div class="method-heading">
          <a href="#M000250" class="method-signature">
          <span class="method-name">ips</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
provide list of public <a href="Cloud.html#M000250">ips</a> to get into the
cloud
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000250-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000250-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 134</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ips</span>
        <span class="ruby-identifier">nodes</span>(<span class="ruby-identifier">:status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;running&quot;</span>).<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">ri</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ri</span>.<span class="ruby-identifier">ip</span> }
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000243" class="method-detail">
        <a name="M000243"></a>

        <div class="method-heading">
          <a href="#M000243" class="method-signature">
          <span class="method-name">method_missing</span><span class="method-args">(m, *args, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Call the remoter commands on the cloud if they don&#8216;t exist on the
cloud itself This gives the cloud access to the remote_base&#8216;s methods
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000243-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000243-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 56</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">method_missing</span>(<span class="ruby-identifier">m</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
        <span class="ruby-identifier">remote_base</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">m</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">remote_base</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">m</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-operator">:</span> <span class="ruby-keyword kw">super</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000245" class="method-detail">
        <a name="M000245"></a>

        <div class="method-heading">
          <a href="#M000245" class="method-signature">
          <span class="method-name">name</span><span class="method-args">(*args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Fetch the <a href="Cloud.html#M000245">name</a> of the cloud
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000245-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000245-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 90</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">name</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
        <span class="ruby-ivar">@cloud_name</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@cloud_name</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@cloud_name</span> <span class="ruby-operator">:</span> (<span class="ruby-identifier">args</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-value">? </span><span class="ruby-operator">:</span><span class="ruby-identifier">default_cloud</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>)
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000259" class="method-detail">
        <a name="M000259"></a>

        <div class="method-heading">
          <a href="#M000259" class="method-signature">
          <span class="method-name">other_clouds</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
TODO: Deprecate
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000259-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000259-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 221</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">other_clouds</span>
        <span class="ruby-identifier">arr</span> = []
        <span class="ruby-identifier">clouds</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">cl</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">arr</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">cl</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">name</span>
        <span class="ruby-keyword kw">end</span>
        <span class="ruby-identifier">arr</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000255" class="method-detail">
        <a name="M000255"></a>

        <div class="method-heading">
          <a href="#M000255" class="method-signature">
          <span class="method-name">rebuild_manifest</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Force rebuilding of the manifest
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000255-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000255-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 189</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rebuild_manifest</span>
        <span class="ruby-ivar">@build_manifest</span> = <span class="ruby-keyword kw">nil</span>
        <span class="ruby-identifier">build_manifest</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000260" class="method-detail">
        <a name="M000260"></a>

        <div class="method-heading">
          <a href="#M000260" class="method-signature">
          <span class="method-name">reset!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Reset the entire cloud
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000260-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000260-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 230</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset!</span>
        <span class="ruby-identifier">reset_remoter_base!</span>
        <span class="ruby-ivar">@build_manifest</span> = <span class="ruby-ivar">@describe_instances</span> = <span class="ruby-ivar">@remote_instances_list</span> = <span class="ruby-keyword kw">nil</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000248" class="method-detail">
        <a name="M000248"></a>

        <div class="method-heading">
          <a href="#M000248" class="method-signature">
          <span class="method-name">setup_defaults</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
setup defaults for the cloud
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000248-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000248-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 120</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup_defaults</span>
        <span class="ruby-comment cmt"># this can be overridden in the spec, but ec2 is the default</span>
        <span class="ruby-identifier">using</span> <span class="ruby-identifier">:ec2</span>
        <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:keypair</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">keypair</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
        <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:rules</span>] = {<span class="ruby-identifier">:expand</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">dsl_options</span>[<span class="ruby-identifier">:expand_when</span>], <span class="ruby-identifier">:contract</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">dsl_options</span>[<span class="ruby-identifier">:contract_when</span>]}
        <span class="ruby-identifier">dependency_resolver</span> <span class="ruby-value str">'chef'</span>        
        <span class="ruby-comment cmt"># enable :haproxy unless dsl_options[:haproxy] == :disabled</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000240" class="method-detail">
        <a name="M000240"></a>

        <div class="method-heading">
          <a href="#M000240" class="method-signature">
          <span class="method-name">verbose</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
include <a href="../../Monitors.html">PoolParty::Monitors</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000240-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000240-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 39</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">verbose</span>
        <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000257" class="method-detail">
        <a name="M000257"></a>

        <div class="method-heading">
          <a href="#M000257" class="method-signature">
          <span class="method-name">write_properties_hash</span><span class="method-args">(filename=::File.join(Default.tmp_path, Default.properties_hash_filename) )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000257-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000257-source">
<pre>
<span class="ruby-comment cmt"># File lib/poolparty/poolparty/cloud.rb, line 200</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">write_properties_hash</span>(<span class="ruby-identifier">filename</span>=<span class="ruby-operator">::</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">Default</span>.<span class="ruby-identifier">tmp_path</span>, <span class="ruby-constant">Default</span>.<span class="ruby-identifier">properties_hash_filename</span>) )
        <span class="ruby-identifier">file_path</span> = <span class="ruby-operator">::</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">filename</span>)
        <span class="ruby-identifier">file_name</span> = <span class="ruby-node">&quot;#{::File.basename(filename, ::File.extname(filename))}_#{name}#{::File.extname(filename)}&quot;</span>
        <span class="ruby-identifier">output</span> = <span class="ruby-identifier">to_properties_hash</span>.<span class="ruby-identifier">to_json</span>
        <span class="ruby-operator">::</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-node">&quot;#{file_path}/#{file_name}&quot;</span>, <span class="ruby-value str">&quot;w&quot;</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">write</span> <span class="ruby-identifier">output</span> }
        <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>